(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{392:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1018).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},3274:(e,t,s)=>{Promise.resolve().then(s.bind(s,7290))},3877:(e,t,s)=>{"use strict";s.d(t,{SQ:()=>u,_2:()=>x,mB:()=>f,rI:()=>c,ty:()=>m});var a=s(8081),r=s(2149),l=s(4874),n=s(3602),i=s(6722),o=s(8022),d=s(7687);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,t)=>{let{className:s,inset:r,children:i,...o}=e;return(0,a.jsxs)(l.ZP,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...o,children:[i,(0,a.jsx)(n.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=l.G5.displayName;let u=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{ref:t,sideOffset:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});u.displayName=l.UC.displayName;let x=r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(l.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...n})});x.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:n,...o}=e;return(0,a.jsxs)(l.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(l.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName,r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(l.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...n})}).displayName=l.JU.displayName;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});f.displayName=l.wv.displayName},4666:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var a=s(8081),r=s(2149),l=s(7687);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});n.displayName="Textarea"},5261:(e,t,s)=>{"use strict";s.d(t,{jH:()=>l});var a=s(2149);s(8081);var r=a.createContext(void 0);function l(e){let t=a.useContext(r);return e||t||"ltr"}},5844:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var a=s(2149);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},300);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5977:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var a=s(8081);s(2149);var r=s(3484),l=s(7687);let n=(0,r.F)("inline-flex items-center rounded-lg border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:s}),t),...r})}},6722:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1018).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6810:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i});var a=s(8081),r=s(2149),l=s(7687);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},7290:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>G});var a=s(8081),r=s(2149),l=s(6810),n=s(5160),i=s(3940),o=s(3425),d=s(9572),c=s(9215),m="Avatar",[u,x]=(0,i.A)(m),[f,p]=u(m),v=r.forwardRef((e,t)=>{let{__scopeAvatar:s,...l}=e,[n,i]=r.useState("idle");return(0,a.jsx)(f,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:(0,a.jsx)(c.sG.span,{...l,ref:t})})});v.displayName=m;var h="AvatarImage",j=r.forwardRef((e,t)=>{let{__scopeAvatar:s,src:l,onLoadingStatusChange:n=()=>{},...i}=e,m=p(h,s),u=function(e,t){let[s,a]=r.useState("idle");return(0,d.N)(()=>{if(!e){a("error");return}let s=!0,r=new window.Image,l=e=>()=>{s&&a(e)};return a("loading"),r.onload=l("loaded"),r.onerror=l("error"),r.src=e,t&&(r.referrerPolicy=t),()=>{s=!1}},[e,t]),s}(l,i.referrerPolicy),x=(0,o.c)(e=>{n(e),m.onImageLoadingStatusChange(e)});return(0,d.N)(()=>{"idle"!==u&&x(u)},[u,x]),"loaded"===u?(0,a.jsx)(c.sG.img,{...i,ref:t,src:l}):null});j.displayName=h;var g="AvatarFallback",N=r.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:l,...n}=e,i=p(g,s),[o,d]=r.useState(void 0===l);return r.useEffect(()=>{if(void 0!==l){let e=window.setTimeout(()=>d(!0),l);return()=>window.clearTimeout(e)}},[l]),o&&"loaded"!==i.imageLoadingStatus?(0,a.jsx)(c.sG.span,{...n,ref:t}):null});N.displayName=g;var y=s(7687);let b=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(v,{ref:t,className:(0,y.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});b.displayName=v.displayName;let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(j,{ref:t,className:(0,y.cn)("aspect-square h-full w-full",s),...r})});w.displayName=j.displayName;let S=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(N,{ref:t,className:(0,y.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});S.displayName=N.displayName;var I=s(118),C=s(900),k=s(6228),A=s(4666),R=s(5192),T=s(3989),E=s(9415),_=s(392),D=s(6546),L=s(3877),O=s(8514),M=s(9651),P=s(5844),z=s(1580),U=s(5977);let F=[{key:"vip",label:"我的会员",icon:"\uD83D\uDC8E"},{key:"orders",label:"购买记录",icon:"\uD83D\uDED2"},{key:"fav",label:"我的收藏",icon:"⭐"},{key:"profile",label:"基本资料",icon:"\uD83D\uDCC4"}],V={userId:0,displayName:"",email:"",intro:"",avatar:""};function G(){var e,t;let{toast:s}=(0,P.dj)(),[i,o]=(0,r.useState)(null),[d,c]=(0,r.useState)("vip"),[m,u]=(0,r.useState)(V),[x,f]=(0,r.useState)(null),[p,v]=(0,r.useState)(!1),[h,j]=(0,r.useState)(0),[g,N]=(0,r.useState)(!1),[y,G]=(0,r.useState)(!1),[Z,$]=(0,r.useState)([]),[J,q]=(0,r.useState)([]),[B,H]=(0,r.useState)([]),[X,W]=(0,r.useState)([]),{userInfo:Q,setUserInfo:Y,logout:K}=(0,O.y)(),[ee,et]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(!1),er=(0,M.useRouter)(),el=e=>{let t=B.find(t=>t.value=="".concat(e));return null==t?void 0:t.intro},en=e=>{let t=X.find(t=>t.value=="".concat(e));return null==t?void 0:t.intro};(0,r.useEffect)(()=>{ea(!0),(0,z.C)("recharge","vipPrice").then(q),(0,z.C)("user","RechargeStatusEnum").then(W),(0,z.C)("user","RechargeLevelEnum").then(H)},[]);let ei=async()=>{G(!0);try{let e=await (0,I.up)();console.log("发起记录查询"),$(e.list)}catch(e){console.error("获取充值记录失败:",e)}finally{G(!1)}};(0,r.useEffect)(()=>{(0,I.vF)().then(e=>{if(3==e.role)e.vipLevel=3;else if(2==e.role){let t=e.expireTime-Date.now();t<=0?e.vipLevel=-1:t<26784e5?e.vipLevel=0:t<107136e5?e.vipLevel=1:t<29408832e5?e.vipLevel=2:e.vipLevel=3}else e.vipLevel=-1;o(e),"orders"===d&&(console.log("当前切换为充值记录了"),ei()),u({userId:e.userId||0,displayName:e.displayName||"",avatar:e.avatar||"",email:e.email||"",intro:e.intro||""})})},[d]),(0,r.useEffect)(()=>{if(x&&x.prePayExpireTime){let e=setInterval(()=>{let t=Math.max(0,Math.floor((x.prePayExpireTime-Date.now())/1e3));j(t),0===t&&clearInterval(e)},1e3);return()=>clearInterval(e)}},[x]);let eo=async()=>{await (0,I.yN)(m).then(e=>{console.log("保存成功"),s({title:"成功",description:"个人信息更新成功"})}).catch(e=>{s({title:"保存失败",description:e.message,variant:"destructive"})})},ed=async()=>{(null==x?void 0:x.payId)&&(N(!0),await (0,I.Wj)(null==x?void 0:x.payId).then(e=>{s({title:"支付提醒",description:"支付状态变更会有一定的延时，到购买记录确认状态吧~"})}).catch(e=>{s({title:"支付提醒",description:e.message,variant:"destructive"})}).finally(()=>{N(!1),v(!1)}))},ec=async e=>{await (0,I.II)(e).then(e=>{s({title:"支付提醒",description:"状态刷新成功~"}),"orders"===d&&ei()}).catch(e=>{s({title:"支付提醒",description:e.message,variant:"destructive"})})},em=(e,t)=>{u(s=>({...s,[e]:t}))},eu=async e=>{await (0,I.qf)(e).then(e=>{f(e),v(!0)}).catch(e=>{s({title:"唤起支付失败了~",description:e.message,variant:"destructive"})})};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#f5f7fa]",children:[(0,a.jsx)("header",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"px-10",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:"\uD83C\uDFE2来个OC"})}),(0,a.jsx)("nav",{className:"flex space-x-6",children:(0,a.jsx)("a",{href:"/",className:"text-gray-700 hover:text-blue-600",children:"招聘"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(E.A,{className:"h-5 w-5 text-gray-500"}),Q?(0,a.jsxs)(L.rI,{children:[(0,a.jsx)(L.ty,{asChild:!0,children:(0,a.jsxs)("span",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)("img",{src:Q.avatar,alt:"avatar",className:"w-8 h-8 rounded-full cursor-pointer",title:Q.nickname||"用户".concat(Q.userId)}),(0,a.jsx)(_.A,{className:"w-4 h-4 ml-1 text-gray-500"})]})}),(0,a.jsxs)(L.SQ,{align:"end",children:[(0,a.jsxs)("div",{className:"px-3 py-2",children:[(0,a.jsx)("div",{className:"font-medium",children:Q.nickname||"用户".concat(Q.userId)}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:1===Q.role?"普通用户":2===Q.role?"VIP用户":3===Q.role?"管理员":"未知"})]}),(0,a.jsx)(L.mB,{}),(0,a.jsx)(L._2,{onClick:()=>{er.push("/user")},children:"个人信息"}),3===Q.role&&(0,a.jsx)(L._2,{onClick:()=>er.push("/admin"),children:"管理后台"}),(0,a.jsx)(L.mB,{}),(0,a.jsx)(L._2,{onClick:K,children:"退出"})]})]}):es&&(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>et(!0),children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-1"}),"登录"]})]})]})})}),(0,a.jsx)("div",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(b,{className:"w-16 h-16 border-4 border-white shadow",children:[(0,a.jsx)(w,{src:null==i?void 0:i.avatar,alt:(null==i?void 0:i.displayName)||"avatar"}),(0,a.jsx)(S,{children:(null==i?void 0:null===(e=i.displayName)||void 0===e?void 0:e[0])||"U"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xl font-bold",children:(null==i?void 0:i.displayName)||"用户".concat(null==i?void 0:i.userId)}),(0,a.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(0,a.jsx)("span",{className:"text-base font-semibold ".concat((null==i?void 0:i.role)===2?"text-yellow-500":"text-gray-400"),children:(null==i?void 0:i.role)===2?"VIP会员":"普通"})})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex mt-8 gap-6",children:[(0,a.jsx)("div",{className:"w-64",children:(0,a.jsx)(l.Zp,{className:"mb-4",children:(0,a.jsxs)(l.Wu,{className:"py-4",children:[(0,a.jsx)("div",{className:"font-bold text-gray-600 mb-2",children:"会员中心"}),(0,a.jsx)("ul",{children:F.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)(n.$,{variant:d===e.key?"secondary":"ghost",className:"w-full justify-start mb-1",onClick:()=>c(e.key),children:[(0,a.jsx)("span",{className:"mr-2",children:e.icon}),e.label]})},e.key))})]})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(l.Zp,{children:(0,a.jsx)(l.Wu,{className:"py-8 min-h-[300px]",children:"profile"===d?(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsx)("div",{className:"font-bold text-lg mb-6",children:"个人基本信息"}),(0,a.jsxs)("div",{className:"flex items-start gap-8 mb-6",children:[(0,a.jsxs)(b,{className:"w-20 h-20 border-4 border-white shadow",children:[(0,a.jsx)(w,{src:null==i?void 0:i.avatar,alt:(null==i?void 0:i.displayName)||"avatar"}),(0,a.jsx)(S,{children:(null==i?void 0:null===(t=i.displayName)||void 0===t?void 0:t[0])||"U"})]}),(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-1 text-sm text-gray-600",children:"账号ID"}),(0,a.jsx)(C.p,{value:m.userId,disabled:!0,className:"bg-blue-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-1 text-sm text-gray-600",children:"昵称"}),(0,a.jsx)(C.p,{value:m.displayName,className:"bg-blue-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-1 text-sm text-gray-600",children:"邮箱"}),(0,a.jsx)(C.p,{value:m.email,onChange:e=>em("email",e.target.value),className:"bg-blue-50"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"mb-1 text-sm text-gray-600",children:"介绍"}),(0,a.jsx)(A.T,{value:m.intro,onChange:e=>em("intro",e.target.value),className:"bg-blue-50 min-h-[100px]",placeholder:"请输入个人介绍："})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(n.$,{onClick:eo,children:"保存个人信息"})})]}):"vip"===d?(0,a.jsxs)("div",{children:[(()=>{if(!i)return null;console.log("userInfo",i);let e=2==i.role||"number"==typeof i.vipLevel&&i.vipLevel>=0,t=3==i.role||3===i.vipLevel;if(!e)return(0,a.jsxs)("div",{className:"relative bg-gradient-to-r from-gray-300 to-gray-400 rounded-2xl shadow text-white p-8 w-full max-w-md mx-auto mb-8 overflow-hidden",children:[(0,a.jsx)("div",{className:"text-2xl font-bold mb-2 flex items-center",children:(0,a.jsx)("span",{className:"mr-2",children:"非会员"})}),(0,a.jsx)("div",{className:"text-lg mt-2",children:i.displayName}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm opacity-80",children:["会员ID: ",i.userId]}),(0,a.jsx)("div",{className:"text-sm opacity-80",children:"您还不是会员"})]}),(0,a.jsx)("div",{className:"absolute right-6 top-6 text-4xl opacity-10",children:"VIP"})]});let s=t?3:i.vipLevel,r=B.find(e=>e.value==="".concat(s));return(0,a.jsxs)("div",{className:"relative bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl shadow-xl text-white p-8 w-full max-w-md mx-auto mb-8 overflow-hidden",children:[(0,a.jsx)("div",{className:"text-2xl font-bold mb-2 flex items-center",children:(0,a.jsx)("span",{className:"mr-2",children:null==r?void 0:r.intro})}),(0,a.jsx)("div",{className:"text-lg mt-2",children:i.displayName}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm opacity-80",children:["会员ID: ",i.userId]}),(0,a.jsx)("div",{className:"text-sm opacity-80",children:t?"永久有效":"到期日: ".concat(i.expireTime?new Date(i.expireTime).toLocaleDateString():"-")})]}),(0,a.jsx)("div",{className:"absolute right-6 top-6 text-4xl opacity-20",children:"VIP"})]})})(),("number"!=typeof(null==i?void 0:i.vipLevel)||3!==i.vipLevel)&&(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 mt-4",children:(null==i?void 0:i.role)!=3&&J.map((e,t)=>(0,a.jsx)("div",{className:"relative overflow-hidden rounded-2xl p-1 bg-gradient-to-br from-amber-200/70 via-orange-300/70 to-rose-400/70 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 w-3/4 mx-auto",children:(0,a.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-6 flex flex-col items-center h-full",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-amber-500 to-rose-500 bg-clip-text text-transparent",children:["￥",e.value]}),(0,a.jsx)("div",{className:"text-gray-700 mb-4 text-center",children:e.intro}),(0,a.jsx)(n.$,{className:"w-full bg-gradient-to-r from-amber-500 to-rose-500 text-white hover:from-amber-600 hover:to-rose-600 shadow-md",onClick:()=>eu(e.value),children:"立即充值"})]})},"".concat(e.value)))})]}):"orders"===d?(0,a.jsx)(a.Fragment,{children:y?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-gray-400 text-lg",children:"加载中..."}):(null==Z?void 0:Z.length)===0?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-gray-400 text-lg",children:"暂无充值记录"}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(k.XI,{className:"min-w-full text-sm",children:[(0,a.jsx)(k.A0,{children:(0,a.jsxs)(k.Hj,{className:"bg-gray-100",children:[(0,a.jsx)(k.nd,{children:"支付ID"}),(0,a.jsx)(k.nd,{children:"交易号"}),(0,a.jsx)(k.nd,{children:"金额"}),(0,a.jsx)(k.nd,{children:"会员等级"}),(0,a.jsx)(k.nd,{children:"支付状态"}),(0,a.jsx)(k.nd,{children:"支付时间"}),(0,a.jsx)(k.nd,{children:"交易ID"}),(0,a.jsx)(k.nd,{children:"编辑"})]})}),(0,a.jsx)(k.BF,{children:Z.map(e=>(0,a.jsxs)(k.Hj,{className:"hover:bg-gray-50",children:[(0,a.jsx)(k.nA,{children:e.payId}),(0,a.jsx)(k.nA,{children:e.tradeNo}),(0,a.jsx)(k.nA,{children:e.amount}),(0,a.jsx)(k.nA,{children:el(e.level)}),(0,a.jsx)(k.nA,{children:0===e.status?(0,a.jsx)(U.E,{children:en(e.status)}):1===e.status?(0,a.jsx)(U.E,{variant:"secondary",children:en(e.status)}):2===e.status?(0,a.jsx)(U.E,{variant:"secondary",children:en(e.status)}):(0,a.jsx)(U.E,{variant:"destructive",children:en(e.status)})}),(0,a.jsx)(k.nA,{children:new Date(e.payTime).toLocaleString()}),(0,a.jsx)(k.nA,{children:e.transactionId}),(0,a.jsxs)(k.nA,{children:[0===e.status&&(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>eu(e.amount),children:"去支付"}),1===e.status&&(0,a.jsx)(n.$,{variant:"destructive",size:"sm",onClick:()=>ec(e.payId),children:"刷新"}),3===e.status&&(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>eu(e.amount),children:"重新充值"})]})]},e.payId))})]})})}):(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-gray-400 text-lg",children:"暂无记录"})})}),(0,a.jsx)(R.lG,{open:p,onOpenChange:v,children:(0,a.jsxs)(R.Cf,{className:"max-w-xs",children:[(0,a.jsx)(R.c7,{children:(0,a.jsx)(R.L3,{children:"微信支付"})}),x&&(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(T.X,{value:x.prePayId,size:180}),(0,a.jsxs)("div",{className:"mt-4 text-sm",children:["交易号：",x.tradeNo]}),(0,a.jsxs)("div",{className:"mt-1 text-sm",children:["充值金额：",x.amount," 元"]}),(0,a.jsxs)("div",{className:"mt-1 text-sm text-red-500",children:["二维码有效期：",(e=>{let t=Math.floor(e/3600).toString().padStart(2,"0"),s=Math.floor(e%3600/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(s,":").concat(a)})(h)]}),(0,a.jsx)(n.$,{className:"mt-4 w-full",onClick:ed,children:g?"处理中...":"我已支付"})]})]})})]})]})]})}},8514:(e,t,s)=>{"use strict";s.d(t,{LoginUserProvider:()=>d,y:()=>o});var a=s(8081),r=s(2149);function l(e){try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}catch(e){return null}}function n(e){try{let t=l(e);if(!t)return!1;if(t.exp&&"number"==typeof t.exp)return t.exp>Math.floor(Date.now()/1e3);return!0}catch(e){return!1}}let i=(0,r.createContext)({userInfo:null,setUserInfo:()=>{},logout:()=>{}});function o(){return(0,r.useContext)(i)}function d(e){let{children:t}=e,[s,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{{let e=localStorage.getItem("oc-user"),t=localStorage.getItem("oc-token");if(e&&t&&n(t))try{o(JSON.parse(e));return}catch(e){}else localStorage.removeItem("oc-user"),localStorage.removeItem("oc-token")}let e=function(e){if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(^| )"+e+"=([^;]+)"));return t?decodeURIComponent(t[2]):null}("oc-session");if(e&&n(e)){let t=l(e);if(t){let s={userId:t.uid,role:t.r,nickname:t.un,avatar:t.av};o(s),localStorage.setItem("oc-user",JSON.stringify(s)),localStorage.setItem("oc-token",e)}}},[]),(0,a.jsx)(i.Provider,{value:{userInfo:s,setUserInfo:o,logout:()=>{document.cookie="oc-session=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT",o(null),localStorage.removeItem("oc-user"),localStorage.removeItem("oc-token")}},children:t})}},8703:(e,t,s)=>{"use strict";s.d(t,{N:()=>o});var a=s(2149),r=s(3940),l=s(9264),n=s(9907),i=s(8081);function o(e){let t=e+"CollectionProvider",[s,o]=(0,r.A)(t),[d,c]=s(t,{collectionRef:{current:null},itemMap:new Map}),m=e=>{let{scope:t,children:s}=e,r=a.useRef(null),l=a.useRef(new Map).current;return(0,i.jsx)(d,{scope:t,itemMap:l,collectionRef:r,children:s})};m.displayName=t;let u=e+"CollectionSlot",x=a.forwardRef((e,t)=>{let{scope:s,children:a}=e,r=c(u,s),o=(0,l.s)(t,r.collectionRef);return(0,i.jsx)(n.DX,{ref:o,children:a})});x.displayName=u;let f=e+"CollectionItemSlot",p="data-radix-collection-item",v=a.forwardRef((e,t)=>{let{scope:s,children:r,...o}=e,d=a.useRef(null),m=(0,l.s)(t,d),u=c(f,s);return a.useEffect(()=>(u.itemMap.set(d,{ref:d,...o}),()=>void u.itemMap.delete(d))),(0,i.jsx)(n.DX,{[p]:"",ref:m,children:r})});return v.displayName=f,[{Provider:m,Slot:x,ItemSlot:v},function(t){let s=c(e+"CollectionConsumer",t);return a.useCallback(()=>{let e=s.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll("[".concat(p,"]")));return Array.from(s.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[s.collectionRef,s.itemMap])},o]}}},e=>{var t=t=>e(e.s=t);e.O(0,[613,127,171,807,302,374,274,497,954,358],()=>t(3274)),_N_E=e.O()}]);