(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{3105:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>q});var t=a(8081),l=a(2149),r=a(6810),i=a(6228),n=a(118),d=a(5160),c=a(5977),o=a(900),x=a(9224),m=a(7687);let p=x.bL;x.l9;let u=x.ZL,h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.hJ,{className:(0,m.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:s})});h.displayName=x.hJ.displayName;let f=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsxs)(u,{children:[(0,t.jsx)(h,{}),(0,t.jsx)(x.UC,{ref:s,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});f.displayName=x.UC.displayName;let j=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};j.displayName="AlertDialogHeader";let g=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,m.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};g.displayName="AlertDialogFooter";let N=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.hE,{ref:s,className:(0,m.cn)("text-lg font-semibold",a),...l})});N.displayName=x.hE.displayName;let v=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.VY,{ref:s,className:(0,m.cn)("text-sm text-muted-foreground",a),...l})});v.displayName=x.VY.displayName;let y=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.rc,{ref:s,className:(0,m.cn)((0,d.r)(),a),...l})});y.displayName=x.rc.displayName;let b=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(x.ZD,{ref:s,className:(0,m.cn)((0,d.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...l})});b.displayName=x.ZD.displayName;var w=a(5192),k=a(9591);let C=(0,a(3484).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),S=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(k.b,{ref:s,className:(0,m.cn)(C(),a),...l})});S.displayName=k.b.displayName;var A=a(4666);let T=0,E=new Map,z=e=>{if(E.has(e))return;let s=setTimeout(()=>{E.delete(e),O({type:"REMOVE_TOAST",toastId:e})},1e6);E.set(e,s)},D=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?z(a):e.toasts.forEach(e=>{z(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},R=[],F={toasts:[]};function O(e){F=D(F,e),R.forEach(e=>{e(F)})}function _(e){let{...s}=e,a=(T=(T+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>O({type:"DISMISS_TOAST",toastId:a});return O({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>O({type:"UPDATE_TOAST",toast:{...e,id:a}})}}var I=a(3396);let L=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(I.bL,{className:(0,m.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...l,ref:s,children:(0,t.jsx)(I.zi,{className:(0,m.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});L.displayName=I.bL.displayName;var M=a(8924),V=a(8022);let U=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(M.bL,{className:(0,m.cn)("grid gap-2",a),...l,ref:s})});U.displayName=M.bL.displayName;let Z=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(M.q7,{ref:s,className:(0,m.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...l,children:(0,t.jsx)(M.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(V.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});Z.displayName=M.q7.displayName;var $=a(2496);let H={app:"",key:"",value:"",intro:"",remark:"",scope:0,state:1};function q(){let[e,s]=(0,l.useState)([]),[a,x]=(0,l.useState)(!0),[m,u]=(0,l.useState)(null),[h,k]=(0,l.useState)(""),[C,T]=(0,l.useState)(""),[E,z]=(0,l.useState)({page:1,size:10,total:0}),[D,I]=(0,l.useState)(!1),{toast:M}=function(){let[e,s]=l.useState(F);return l.useEffect(()=>(R.push(s),()=>{let e=R.indexOf(s);e>-1&&R.splice(e,1)}),[e]),{...e,toast:_,dismiss:e=>O({type:"DISMISS_TOAST",toastId:e})}}(),[V,q]=(0,l.useState)(!1),[B,P]=(0,l.useState)(H),[W,G]=(0,l.useState)(!1),[J,X]=(0,l.useState)(null),Y=async e=>{try{x(!0);let a=await (0,n.fetchDictList)(e);s(a.list),z({page:a.page,size:a.size,total:a.total})}catch(e){u(e.message)}finally{x(!1)}};(0,l.useEffect)(()=>{Y({app:h,key:C,page:E.page,size:E.size})},[E.page,E.size]);let K=async()=>{try{I(!0),await (0,n.saveDict)(B),M({title:"成功",description:"字典项已保存"}),q(!1),Y({app:h,key:C,page:E.page,size:E.size})}catch(e){M({title:"失败",description:e.message,variant:"destructive"})}finally{I(!1)}},Q=e=>{G(!0),P({...e}),q(!0)},ee=async(e,a)=>{let t=+!!a;try{await (0,n.updateDictState)(e,t),M({title:"成功",description:"状态已更新"}),s(s=>s.map(s=>s.id===e?{...s,state:t}:s))}catch(e){M({title:"失败",description:e.message,variant:"destructive"})}},es=async()=>{if(J)try{await (0,n.deleteDict)(J.id),M({title:"成功",description:"字典项已删除"}),X(null),Y({app:h,key:C,page:E.page,size:E.size})}catch(e){M({title:"失败",description:e.message,variant:"destructive"})}},ea=e=>1===e?(0,t.jsx)(c.E,{variant:"outline",children:"管理配置"}):2==e?(0,t.jsx)(c.E,{variant:"outline",children:"服务配置"}):(0,t.jsx)(c.E,{variant:"outline",children:"公开配置"});return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"字典管理"}),(0,t.jsx)(d.$,{onClick:()=>{G(!1),P(H),q(!0)},children:"添加配置"})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(o.p,{placeholder:"App",value:h,onChange:e=>k(e.target.value),className:"max-w-xs"}),(0,t.jsx)(o.p,{placeholder:"Code",value:C,onChange:e=>T(e.target.value),className:"max-w-xs"}),(0,t.jsx)(d.$,{onClick:()=>{1===E.page?Y({app:h,key:C,page:1,size:E.size}):z({...E,page:1})},children:"查询"})]})})}),(0,t.jsx)(r.Zp,{children:(0,t.jsxs)(r.Wu,{className:"pt-6",children:[a&&(0,t.jsx)("p",{children:"加载中..."}),m&&(0,t.jsxs)("p",{className:"text-red-500",children:["错误: ",m]}),!a&&!m&&(0,t.jsxs)(i.XI,{children:[(0,t.jsx)(i.A0,{children:(0,t.jsxs)(i.Hj,{children:[(0,t.jsx)(i.nd,{children:"ID"}),(0,t.jsx)(i.nd,{children:"App"}),(0,t.jsx)(i.nd,{children:"作用域"}),(0,t.jsx)(i.nd,{children:"Code"}),(0,t.jsx)(i.nd,{children:"Value"}),(0,t.jsx)(i.nd,{children:"说明"}),(0,t.jsx)(i.nd,{children:"状态"}),(0,t.jsx)(i.nd,{children:"备注"}),(0,t.jsx)(i.nd,{children:"更新时间"}),(0,t.jsx)(i.nd,{children:"操作"})]})}),(0,t.jsx)(i.BF,{children:e.map(e=>(0,t.jsxs)(i.Hj,{children:[(0,t.jsx)(i.nA,{children:e.id}),(0,t.jsx)(i.nA,{children:e.app}),(0,t.jsx)(i.nA,{children:ea(e.scope)}),(0,t.jsx)(i.nA,{children:e.key}),(0,t.jsx)(i.nA,{className:"max-w-xs truncate",children:e.value}),(0,t.jsx)(i.nA,{className:"max-w-xs truncate",children:e.intro}),(0,t.jsx)(i.nA,{children:(0,t.jsx)(L,{checked:1===e.state,onCheckedChange:s=>ee(e.id,s)})}),(0,t.jsx)(i.nA,{children:e.remark}),(0,t.jsx)(i.nA,{children:new Date(e.updateTime).toLocaleString()}),(0,t.jsxs)(i.nA,{className:"space-x-2",children:[(0,t.jsx)(d.$,{variant:"link",size:"sm",onClick:()=>Q(e),children:"编辑"}),(0,t.jsx)(d.$,{variant:"link",size:"sm",className:"text-red-600",onClick:()=>X(e),children:"删除"})]})]},e.id))})]}),(0,t.jsx)("div",{className:"mt-4 flex justify-end",children:(0,t.jsx)($.dK,{children:(0,t.jsxs)($.Iu,{children:[(0,t.jsx)($.cU,{children:(0,t.jsx)($.Eb,{href:"#",onClick:e=>{e.preventDefault(),E.page>1&&z({...E,page:E.page-1})},className:E.page<=1?"pointer-events-none opacity-50":""})}),(0,t.jsx)($.cU,{children:(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["第 ",E.page," 页 / 共 ",Math.ceil(E.total/E.size)," 页"]})}),(0,t.jsx)($.cU,{children:(0,t.jsx)($.WA,{href:"#",onClick:e=>{e.preventDefault(),E.page*E.size<E.total&&z({...E,page:E.page+1})},className:E.page*E.size>=E.total?"pointer-events-none opacity-50":""})})]})})})]})})]}),(0,t.jsx)(w.lG,{open:V,onOpenChange:e=>{q(e),e||(P(H),G(!1))},children:(0,t.jsxs)(w.Cf,{className:"sm:max-w-[625px]",children:[(0,t.jsxs)(w.c7,{children:[(0,t.jsx)(w.L3,{children:W?"编辑配置":"添加新配置"}),(0,t.jsx)(w.rr,{children:W?"在这里修改您的字典配置项。":"在这里添加一个新的字典配置项。"})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(S,{htmlFor:"app",className:"text-right",children:"App"}),(0,t.jsx)(o.p,{id:"app",value:B.app,onChange:e=>P({...B,app:e.target.value}),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(S,{htmlFor:"key",className:"text-right",children:"Code"}),(0,t.jsx)(o.p,{id:"key",value:B.key,onChange:e=>P({...B,key:e.target.value}),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(S,{htmlFor:"value",className:"text-right",children:"Value"}),(0,t.jsx)(A.T,{id:"value",value:B.value,onChange:e=>P({...B,value:e.target.value}),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(S,{htmlFor:"intro",className:"text-right",children:"说明"}),(0,t.jsx)(A.T,{id:"intro",value:B.intro,onChange:e=>P({...B,intro:e.target.value}),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(S,{htmlFor:"scope",className:"text-right",children:"作用域"}),(0,t.jsxs)(U,{value:String(B.scope),onValueChange:e=>P({...B,scope:Number(e)}),className:"col-span-3 flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(Z,{value:"0",id:"scope-0"}),(0,t.jsx)(S,{htmlFor:"scope-0",children:"公开配置"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(Z,{value:"1",id:"scope-1"}),(0,t.jsx)(S,{htmlFor:"scope-1",children:"管理配置"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(Z,{value:"2",id:"scope-2"}),(0,t.jsx)(S,{htmlFor:"scope-2",children:"服务配置"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(S,{htmlFor:"intro",className:"text-right",children:"备注"}),(0,t.jsx)(A.T,{id:"remark",value:B.remark,onChange:e=>P({...B,remark:e.target.value}),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(S,{htmlFor:"state",className:"text-right",children:"状态"}),(0,t.jsxs)(U,{value:String(B.state),onValueChange:e=>P({...B,state:Number(e)}),className:"col-span-3 flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(Z,{value:"1",id:"state-1"}),(0,t.jsx)(S,{htmlFor:"state-1",children:"有效"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(Z,{value:"0",id:"state-0"}),(0,t.jsx)(S,{htmlFor:"state-0",children:"未启用"})]})]})]})]}),(0,t.jsx)(w.Es,{children:(0,t.jsx)(d.$,{type:"submit",onClick:K,disabled:D,children:D?"保存中...":"保存"})})]})}),(0,t.jsx)(p,{open:!!J,onOpenChange:e=>!e&&X(null),children:(0,t.jsxs)(f,{children:[(0,t.jsxs)(j,{children:[(0,t.jsx)(N,{children:"确定要删除吗？"}),(0,t.jsx)(v,{children:"此操作无法撤销。这将永久删除您的字典配置。"})]}),(0,t.jsxs)(g,{children:[(0,t.jsx)(b,{children:"取消"}),(0,t.jsx)(y,{onClick:es,children:"确定"})]})]})})]})}},4666:(e,s,a)=>{"use strict";a.d(s,{T:()=>i});var t=a(8081),l=a(2149),r=a(7687);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...l})});i.displayName="Textarea"},6810:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var t=a(8081),l=a(2149),r=a(7687);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});i.displayName="Card";let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});n.displayName="CardHeader";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});d.displayName="CardTitle";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",a),...l})});o.displayName="CardContent",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},6840:(e,s,a)=>{Promise.resolve().then(a.bind(a,3105))}},e=>{var s=s=>e(e.s=s);e.O(0,[613,807,578,367,294,497,954,358],()=>s(6840)),_N_E=e.O()}]);