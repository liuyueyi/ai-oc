(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{366:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},6146:()=>{},6726:(e,t,o)=>{Promise.resolve().then(o.bind(o,8514)),Promise.resolve().then(o.t.bind(o,366,23)),Promise.resolve().then(o.t.bind(o,6146,23))},8514:(e,t,o)=>{"use strict";o.d(t,{LoginUserProvider:()=>s,y:()=>u});var r=o(8081),n=o(2149);function l(e){try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}catch(e){return null}}function c(e){try{let t=l(e);if(!t)return!1;if(t.exp&&"number"==typeof t.exp)return t.exp>Math.floor(Date.now()/1e3);return!0}catch(e){return!1}}let a=(0,n.createContext)({userInfo:null,setUserInfo:()=>{},logout:()=>{}});function u(){return(0,n.useContext)(a)}function s(e){let{children:t}=e,[o,u]=(0,n.useState)(null);return(0,n.useEffect)(()=>{{let e=localStorage.getItem("oc-user"),t=localStorage.getItem("oc-token");if(e&&t&&c(t))try{u(JSON.parse(e));return}catch(e){}else localStorage.removeItem("oc-user"),localStorage.removeItem("oc-token")}let e=function(e){if("undefined"==typeof document)return null;let t=document.cookie.match(RegExp("(^| )"+e+"=([^;]+)"));return t?decodeURIComponent(t[2]):null}("oc-session");if(e&&c(e)){let t=l(e);if(t){let o={userId:t.uid,role:t.r,nickname:t.un,avatar:t.av};u(o),localStorage.setItem("oc-user",JSON.stringify(o)),localStorage.setItem("oc-token",e)}}},[]),(0,r.jsx)(a.Provider,{value:{userInfo:o,setUserInfo:u,logout:()=>{document.cookie="oc-session=;path=/;expires=Thu, 01 Jan 1970 00:00:00 GMT",u(null),localStorage.removeItem("oc-user"),localStorage.removeItem("oc-token")}},children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[47,497,954,358],()=>t(6726)),_N_E=e.O()}]);