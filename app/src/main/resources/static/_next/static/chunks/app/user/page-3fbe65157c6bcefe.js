(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{118:(e,a,t)=>{"use strict";t.r(a),t.d(a,{batchPublishDrafts:()=>p,deleteDict:()=>N,deleteDraft:()=>h,fetchDictList:()=>b,fetchDraftList:()=>x,fetchJobList:()=>n,fetchTaskList:()=>m,fetchUserList:()=>g,getRechargeList:()=>R,getUserDetail:()=>S,getWxSseUrl:()=>d,jobDetail:()=>o,postWxCallback:()=>i,reRunTask:()=>f,saveDict:()=>j,submitAIEntry:()=>u,toPay:()=>k,updateDictState:()=>w,updateDraft:()=>v,updateUserDetail:()=>I,updateUserRole:()=>y});var r=t(6807);let s="http://localhost:8080",l=r.A.create({baseURL:s,timeout:36e4});function d(){return"".concat(s,"/api/wx/subscribe")}async function i(e){await l.post("/api/wx/callback",e,{headers:{"content-type":"application/xml"}})}async function n(e){var a;let t=await l.get("/api/oc/list",{params:e});if(t.data&&0===t.data.code)return t.data.data;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"获取岗位列表失败")}async function o(e){var a;let t=await l.get("/api/oc/detail?id=".concat(e));if(t.data&&0===t.data.code)return t.data.data;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"获取岗位信息失败")}function c(e){return e?"/api/admin/gather/asyncSubmit":"/api/admin/gather/submit"}async function u(e){var a,t;if(e.file){let a=new FormData;a.append("file",e.file),a.append("model",e.model),a.append("type",e.type);let r=await l.post(c(!0),a,{headers:{"Content-Type":"multipart/form-data"}});if(r.data&&0===r.data.code)return r.data.data;throw Error((null===(t=r.data)||void 0===t?void 0:t.msg)||"AI录入失败")}let r=await l.post(c(!0),e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(r.data&&0===r.data.code)return r.data.data;throw Error((null===(a=r.data)||void 0===a?void 0:a.msg)||"AI录入失败")}async function m(e){var a;let t=await l.post("/api/admin/gather/list",e);if(t.data&&0===t.data.code)return t.data.data;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"获取任务列表失败")}async function f(e){var a;let t=await l.get("/api/admin/gather/reRun?taskId=".concat(e));if(t.data&&0===t.data.code)return!0===t.data.data;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"重跑任务失败")}async function x(e){var a;let t=await l.get("/api/admin/draft/list",{params:e});if(t.data&&0===t.data.code)return Array.isArray(t.data.data)?{list:t.data.data,total:t.data.data.length}:t.data.data;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"获取草稿列表失败")}async function p(e){var a;let t=await l.post("/api/admin/draft/toOc",e);if(!t.data||0!==t.data.code)throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"发布失败")}async function v(e){var a;let t=await l.post("/api/admin/draft/update",e);if(t.data&&0===t.data.code)return!0;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"草稿更新失败")}async function h(e){var a;let t=await l.get("/api/admin/draft/delete?draftId="+e);if(t.data&&0===t.data.code)return!0;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"草稿删除失败")}async function g(e){var a;let t=await l.get("/api/admin/user/list",{params:e});if(t.data&&0===t.data.code)return t.data.data;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"获取用户列表失败")}async function y(e){var a;let t=new URLSearchParams;t.append("userId",String(e.userId)),t.append("role",String(e.role)),t.append("expireTime",String(e.expireTime));let r=await l.post("/api/admin/user/updateRole",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(r.data&&0===r.data.code)return!0===r.data.data;throw Error((null===(a=r.data)||void 0===a?void 0:a.msg)||"用户角色更新失败")}async function b(e){var a;let t=await l.get("/api/admin/dict/list",{params:e});if(t.data&&0===t.data.code)return t.data.data;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"获取字典列表失败")}async function j(e){var a;let t=await l.post("/api/admin/dict/save",e);if(t.data&&0===t.data.code)return!0;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"保存字典失败")}async function w(e,a){var t;let r=await l.post("/api/admin/dict/updateState",{id:e,state:a},{headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(r.data&&0===r.data.code)return!0;throw Error((null===(t=r.data)||void 0===t?void 0:t.msg)||"更新状态失败")}async function N(e){var a;let t=await l.get("/api/admin/dict/delete?id="+e);if(t.data&&0===t.data.code)return!0;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"删除失败")}async function S(){var e;let a=await l.get("/api/user/detail");if(a.data&&0===a.data.code)return a.data.data;throw Error((null===(e=a.data)||void 0===e?void 0:e.msg)||"获取用户信息失败")}async function I(e){var a;let t=await l.post("/api/user/update",e);if(t.data&&0===t.data.code)return t.data.data;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"更新用户信息失败")}async function k(e){var a;let t=await l.get("/api/recharge/toPay?vipLevel=".concat(e));if(t.data&&0===t.data.code)return t.data.data;throw Error((null===(a=t.data)||void 0===a?void 0:a.msg)||"获取支付信息失败")}async function R(){var e;let a=await l.get("/api/recharge/listRecords");if(a.data&&0===a.data.code)return a.data.data;throw Error((null===(e=a.data)||void 0===e?void 0:e.msg)||"获取用户信息失败")}l.interceptors.request.use(e=>{{let a=localStorage.getItem("oc-token");a&&(e.headers=e.headers||{},e.headers["X-OC-TOKEN"]=a)}return e})},900:(e,a,t)=>{"use strict";t.d(a,{p:()=>d});var r=t(8081),s=t(2149),l=t(7687);let d=s.forwardRef((e,a)=>{let{className:t,type:s,...d}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...d})});d.displayName="Input"},3274:(e,a,t)=>{Promise.resolve().then(t.bind(t,7290))},4666:(e,a,t)=>{"use strict";t.d(a,{T:()=>d});var r=t(8081),s=t(2149),l=t(7687);let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s})});d.displayName="Textarea"},5160:(e,a,t)=>{"use strict";t.d(a,{$:()=>o,r:()=>n});var r=t(8081),s=t(2149),l=t(9907),d=t(3484),i=t(7687);let n=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,a)=>{let{className:t,variant:s,size:d,asChild:o=!1,...c}=e,u=o?l.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(n({variant:s,size:d,className:t})),ref:a,...c})});o.displayName="Button"},5192:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>m,Es:()=>x,L3:()=>p,c7:()=>f,lG:()=>n,rr:()=>v,zM:()=>o});var r=t(8081),s=t(2149),l=t(437),d=t(2522),i=t(7687);let n=l.bL,o=l.l9,c=l.ZL;l.bm;let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.hJ,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});u.displayName=l.hJ.displayName;let m=s.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(l.UC,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[s,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let f=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};f.displayName="DialogHeader";let x=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};x.displayName="DialogFooter";let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.hE,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});p.displayName=l.hE.displayName;let v=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.VY,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})});v.displayName=l.VY.displayName},6228:(e,a,t)=>{"use strict";t.d(a,{A0:()=>i,BF:()=>n,Hj:()=>o,XI:()=>d,nA:()=>u,nd:()=>c});var r=t(8081),s=t(2149),l=t(7687);let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,l.cn)("w-full caption-bottom text-sm",t),...s})})});d.displayName="Table";let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("thead",{ref:a,className:(0,l.cn)("[&_tr]:border-b",t),...s})});i.displayName="TableHeader";let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...s})});n.displayName="TableBody",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})}).displayName="TableFooter";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("tr",{ref:a,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});o.displayName="TableRow";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("th",{ref:a,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s})});c.displayName="TableHead";let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("td",{ref:a,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s})});u.displayName="TableCell",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("caption",{ref:a,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...s})}).displayName="TableCaption"},6810:(e,a,t)=>{"use strict";t.d(a,{BT:()=>o,Wu:()=>c,ZB:()=>n,Zp:()=>d,aR:()=>i});var r=t(8081),s=t(2149),l=t(7687);let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});d.displayName="Card";let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});i.displayName="CardHeader";let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});n.displayName="CardTitle";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},7290:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>U});var r=t(8081),s=t(2149),l=t(6810),d=t(5160),i=t(3940),n=t(3425),o=t(9572),c=t(9215),u="Avatar",[m,f]=(0,i.A)(u),[x,p]=m(u),v=s.forwardRef((e,a)=>{let{__scopeAvatar:t,...l}=e,[d,i]=s.useState("idle");return(0,r.jsx)(x,{scope:t,imageLoadingStatus:d,onImageLoadingStatusChange:i,children:(0,r.jsx)(c.sG.span,{...l,ref:a})})});v.displayName=u;var h="AvatarImage",g=s.forwardRef((e,a)=>{let{__scopeAvatar:t,src:l,onLoadingStatusChange:d=()=>{},...i}=e,u=p(h,t),m=function(e,a){let[t,r]=s.useState("idle");return(0,o.N)(()=>{if(!e){r("error");return}let t=!0,s=new window.Image,l=e=>()=>{t&&r(e)};return r("loading"),s.onload=l("loaded"),s.onerror=l("error"),s.src=e,a&&(s.referrerPolicy=a),()=>{t=!1}},[e,a]),t}(l,i.referrerPolicy),f=(0,n.c)(e=>{d(e),u.onImageLoadingStatusChange(e)});return(0,o.N)(()=>{"idle"!==m&&f(m)},[m,f]),"loaded"===m?(0,r.jsx)(c.sG.img,{...i,ref:a,src:l}):null});g.displayName=h;var y="AvatarFallback",b=s.forwardRef((e,a)=>{let{__scopeAvatar:t,delayMs:l,...d}=e,i=p(y,t),[n,o]=s.useState(void 0===l);return s.useEffect(()=>{if(void 0!==l){let e=window.setTimeout(()=>o(!0),l);return()=>window.clearTimeout(e)}},[l]),n&&"loaded"!==i.imageLoadingStatus?(0,r.jsx)(c.sG.span,{...d,ref:a}):null});b.displayName=y;var j=t(7687);let w=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(v,{ref:a,className:(0,j.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s})});w.displayName=v.displayName;let N=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(g,{ref:a,className:(0,j.cn)("aspect-square h-full w-full",t),...s})});N.displayName=g.displayName;let S=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(b,{ref:a,className:(0,j.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s})});S.displayName=b.displayName;var I=t(118),k=t(900),R=t(6228),E=t(4666),C=t(5192),D=t(3989);let T=[{key:"vip",label:"我的会员",icon:"\uD83D\uDC8E"},{key:"orders",label:"购买记录",icon:"\uD83D\uDED2"},{key:"fav",label:"我的收藏",icon:"⭐"},{key:"profile",label:"基本资料",icon:"\uD83D\uDCC4"}],L=[{value:0,label:"月卡",desc:"月会员"},{value:1,label:"季卡",desc:"季会员"},{value:2,label:"年卡",desc:"年会员"},{value:3,label:"终身卡",desc:"终身会员"}],A={0:"待支付",1:"支付中",2:"支付成功",3:"支付失败"},P={userId:0,displayName:"",email:"",intro:"",avatar:""};function U(){var e,a;let[i,n]=(0,s.useState)(null),[o,c]=(0,s.useState)("vip"),[u,m]=(0,s.useState)(P),[f,x]=(0,s.useState)(null),[p,v]=(0,s.useState)(!1),[h,g]=(0,s.useState)(0),[y,b]=(0,s.useState)(!1),[j,U]=(0,s.useState)(!1),[_,F]=(0,s.useState)([]);(0,s.useEffect)(()=>{(0,I.getUserDetail)().then(e=>{n(e);let a=async()=>{U(!0);try{let e=await (0,I.getRechargeList)();console.log("发起记录查询"),F(e.list)}catch(e){console.error("获取充值记录失败:",e)}finally{U(!1)}};"orders"===o&&(console.log("当前切换为充值记录了"),a()),m({userId:e.userId||0,displayName:e.displayName||"",avatar:e.avatar||"",email:e.email||"",intro:e.intro||""})})},[o]),(0,s.useEffect)(()=>{if(f&&f.prePayExpireTime){let e=setInterval(()=>{let a=Math.max(0,Math.floor((f.prePayExpireTime-Date.now())/1e3));g(a),0===a&&clearInterval(e)},1e3);return()=>clearInterval(e)}},[f]);let z=async()=>{try{await (0,I.updateUserDetail)(u),console.log("个人信息更新成功")}catch(e){console.error("个人信息更新失败:",e)}},H=async()=>{if(null==f?void 0:f.payId){b(!0);try{await fetch("/api/recharge/paying?rechargeId=".concat(f.payId))}finally{b(!1)}}},M=(e,a)=>{m(t=>({...t,[e]:a}))},$=async e=>{x(await Promise.resolve().then(t.bind(t,118)).then(a=>a.toPay(e))),v(!0)};return(0,r.jsxs)("div",{className:"min-h-screen bg-[#f5f7fa]",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-8 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(w,{className:"w-16 h-16 border-4 border-white shadow",children:[(0,r.jsx)(N,{src:null==i?void 0:i.avatar,alt:(null==i?void 0:i.displayName)||"avatar"}),(0,r.jsx)(S,{children:(null==i?void 0:null===(e=i.displayName)||void 0===e?void 0:e[0])||"U"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xl font-bold",children:(null==i?void 0:i.displayName)||"用户".concat(null==i?void 0:i.userId)}),(0,r.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(0,r.jsx)("span",{className:"text-base font-semibold ".concat((null==i?void 0:i.role)===2?"text-yellow-500":"text-gray-400"),children:(null==i?void 0:i.role)===2?"VIP会员":"普通"})})]})]}),(0,r.jsx)(d.$,{variant:"outline",className:"text-gray-700",children:"退出登录"})]})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex mt-8 gap-6",children:[(0,r.jsx)("div",{className:"w-64",children:(0,r.jsx)(l.Zp,{className:"mb-4",children:(0,r.jsxs)(l.Wu,{className:"py-4",children:[(0,r.jsx)("div",{className:"font-bold text-gray-600 mb-2",children:"会员中心"}),(0,r.jsx)("ul",{children:T.map(e=>(0,r.jsx)("li",{children:(0,r.jsxs)(d.$,{variant:o===e.key?"secondary":"ghost",className:"w-full justify-start mb-1",onClick:()=>c(e.key),children:[(0,r.jsx)("span",{className:"mr-2",children:e.icon}),e.label]})},e.key))})]})})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(l.Zp,{children:(0,r.jsx)(l.Wu,{className:"py-8 min-h-[300px]",children:"profile"===o?(0,r.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,r.jsx)("div",{className:"font-bold text-lg mb-6",children:"个人基本信息"}),(0,r.jsxs)("div",{className:"flex items-start gap-8 mb-6",children:[(0,r.jsxs)(w,{className:"w-20 h-20 border-4 border-white shadow",children:[(0,r.jsx)(N,{src:null==i?void 0:i.avatar,alt:(null==i?void 0:i.displayName)||"avatar"}),(0,r.jsx)(S,{children:(null==i?void 0:null===(a=i.displayName)||void 0===a?void 0:a[0])||"U"})]}),(0,r.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-1 text-sm text-gray-600",children:"账号ID"}),(0,r.jsx)(k.p,{value:u.userId,disabled:!0,className:"bg-blue-50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-1 text-sm text-gray-600",children:"昵称"}),(0,r.jsx)(k.p,{value:u.displayName,className:"bg-blue-50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-1 text-sm text-gray-600",children:"邮箱"}),(0,r.jsx)(k.p,{value:u.email,onChange:e=>M("email",e.target.value),className:"bg-blue-50"})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"mb-1 text-sm text-gray-600",children:"介绍"}),(0,r.jsx)(E.T,{value:u.intro,onChange:e=>M("intro",e.target.value),className:"bg-blue-50 min-h-[100px]",placeholder:"请输入个人介绍："})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(d.$,{onClick:z,children:"保存个人信息"})})]}):"vip"===o?(0,r.jsxs)("div",{children:[(()=>{if(!i)return null;let e="number"==typeof i.vipLevel&&i.vipLevel>=0,a=3===i.vipLevel;if(!e)return(0,r.jsxs)("div",{className:"relative bg-gradient-to-r from-gray-300 to-gray-400 rounded-2xl shadow text-white p-8 w-full max-w-md mx-auto mb-8 overflow-hidden",children:[(0,r.jsx)("div",{className:"text-2xl font-bold mb-2 flex items-center",children:(0,r.jsx)("span",{className:"mr-2",children:"非会员"})}),(0,r.jsx)("div",{className:"text-lg mt-2",children:i.displayName}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm opacity-80",children:["会员ID: ",i.userId]}),(0,r.jsx)("div",{className:"text-sm opacity-80",children:"您还不是会员"})]}),(0,r.jsx)("div",{className:"absolute right-6 top-6 text-4xl opacity-10",children:"VIP"})]});let t=a?3:i.vipLevel,s=L.find(e=>e.value===t);return(0,r.jsxs)("div",{className:"relative bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl shadow-xl text-white p-8 w-full max-w-md mx-auto mb-8 overflow-hidden",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold mb-2 flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:null==s?void 0:s.label}),(0,r.jsx)("span",{className:"text-lg font-normal",children:null==s?void 0:s.desc})]}),(0,r.jsx)("div",{className:"text-lg mt-2",children:i.displayName}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm opacity-80",children:["会员ID: ",i.userId]}),(0,r.jsx)("div",{className:"text-sm opacity-80",children:a?"永久有效":"到期日: ".concat(i.expireTime?new Date(i.expireTime).toLocaleDateString():"-")})]}),(0,r.jsx)("div",{className:"absolute right-6 top-6 text-4xl opacity-20",children:"VIP"})]})})(),("number"!=typeof(null==i?void 0:i.vipLevel)||3!==i.vipLevel)&&(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2",children:L.filter(e=>3!==e.value||(null==i?void 0:i.vipLevel)!==3).map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6 flex flex-col items-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold mb-2",children:e.label}),(0,r.jsx)("div",{className:"text-gray-500 mb-4",children:e.desc}),(0,r.jsx)(d.$,{onClick:()=>$(e.value),children:"充值"})]},e.value))}),(0,r.jsx)(C.lG,{open:p,onOpenChange:v,children:(0,r.jsxs)(C.Cf,{className:"max-w-xs",children:[(0,r.jsx)(C.c7,{children:(0,r.jsx)(C.L3,{children:"微信支付"})}),f&&(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(D.X,{value:f.prePayId,size:180}),(0,r.jsxs)("div",{className:"mt-4 text-sm",children:["交易号：",f.tradeNo]}),(0,r.jsxs)("div",{className:"mt-1 text-sm",children:["充值金额：",f.amount," 元"]}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-red-500",children:["二维码有效期：",(e=>{let a=Math.floor(e/3600).toString().padStart(2,"0"),t=Math.floor(e%3600/60).toString().padStart(2,"0"),r=(e%60).toString().padStart(2,"0");return"".concat(a,":").concat(t,":").concat(r)})(h)]}),(0,r.jsx)(d.$,{className:"mt-4 w-full",onClick:H,children:y?"处理中...":"我已支付"})]})]})})]}):"orders"===o?(0,r.jsx)(r.Fragment,{children:j?(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-gray-400 text-lg",children:"加载中..."}):0===_.length?(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-gray-400 text-lg",children:"暂无充值记录"}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(R.XI,{className:"min-w-full text-sm",children:[(0,r.jsx)(R.A0,{children:(0,r.jsxs)(R.Hj,{className:"bg-gray-100",children:[(0,r.jsx)(R.nd,{children:"支付ID"}),(0,r.jsx)(R.nd,{children:"交易号"}),(0,r.jsx)(R.nd,{children:"金额"}),(0,r.jsx)(R.nd,{children:"会员等级"}),(0,r.jsx)(R.nd,{children:"支付状态"}),(0,r.jsx)(R.nd,{children:"支付时间"}),(0,r.jsx)(R.nd,{children:"交易ID"})]})}),(0,r.jsx)(R.BF,{children:_.map(e=>{var a;return(0,r.jsxs)(R.Hj,{className:"hover:bg-gray-50",children:[(0,r.jsx)(R.nA,{children:e.payId}),(0,r.jsx)(R.nA,{children:e.tradeNo}),(0,r.jsx)(R.nA,{children:e.amount}),(0,r.jsx)(R.nA,{children:function(e){let a=L.find(a=>a.value===e);return a?a.label:e}(e.level)}),(0,r.jsx)(R.nA,{children:A[a=e.status]||"".concat(a)}),(0,r.jsx)(R.nA,{children:new Date(e.payTime).toLocaleString()}),(0,r.jsx)(R.nA,{children:e.transactionId})]},e.payId)})})]})})}):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-gray-400 text-lg",children:"暂无记录"})})})})]})]})}},7687:(e,a,t)=>{"use strict";t.d(a,{cn:()=>l,r:()=>d});var r=t(6522),s=t(4483);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}function d(e){if(!e)return"-";let a=new Date(e);return"".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"),"-").concat(String(a.getDate()).padStart(2,"0")," ").concat(String(a.getHours()).padStart(2,"0"),":").concat(String(a.getMinutes()).padStart(2,"0"),":").concat(String(a.getSeconds()).padStart(2,"0"))}}},e=>{var a=a=>e(e.s=a);e.O(0,[613,807,578,132,497,954,358],()=>a(3274)),_N_E=e.O()}]);